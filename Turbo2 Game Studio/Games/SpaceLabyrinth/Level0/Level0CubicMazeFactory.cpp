
#include <pch.h>

#include <Level0CubicMazeFactory.h>

//  ICubicMazeFactory Methods ------------------------------------------------------------------------------------------

std::shared_ptr<CubicMaze> Level0CubicMazeFactory::MakeMaze(int width, int height, int depth)
{
	std::shared_ptr<CubicMaze> cubicMaze = std::shared_ptr<CubicMaze>(new CubicMaze(8, 3, 8));
	CubicMazeLocation	size = cubicMaze->Size();

	//  I'm laying out this array visually - it's not the same as mazeArray.
	int wallcodes[3][8][8] =
	{
		{
			{ 0x000000, 0x000000, 0x000000, 0x801110, 0x041110, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x101100, 0x011100, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x101100, 0x011100, 0x000000, 0x000000, 0x000000 },
			{ 0x101140, 0x001110, 0x001110, 0x001100, 0x021100, 0x001010, 0x001010, 0x011010 },
			{ 0x101108, 0x001101, 0x001101, 0x001100, 0x021100, 0x001001, 0x001001, 0x011001 },
			{ 0x000000, 0x000000, 0x000000, 0x101100, 0x011100, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x101100, 0x011100, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x401101, 0x081101, 0x000000, 0x000000, 0x000000 }
		},
		{
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x100010, 0x000010, 0x010010 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x100001, 0x000001, 0x010001 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 }
		},
		{
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x100110, 0x000110, 0x010180 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x100101, 0x000101, 0x010104 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 }
		}
	};

	/*
	int wallcodes[3][8][8] =
	{
		{
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			},
		{
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
		},
		{
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
			{ 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000 },
		}
	};
	*/

	for (int h = 0; h < size.H; h++)
	for (int w = 0; w < size.W; w++)
	for (int d = 0; d < size.D; d++)
	{
		int wallcode = wallcodes[h][7 - d][w];
		CubicMazeCell *cell = cubicMaze->Cell(w, h, d);

		cell->LeftWall.Type		= (CubicMazeCellWallType)((wallcode & 0xF00000) >> 20);
		cell->RightWall.Type	= (CubicMazeCellWallType)((wallcode & 0x0F0000) >> 16);
		cell->TopWall.Type		= (CubicMazeCellWallType)((wallcode & 0x00F000) >> 12);
		cell->BottomWall.Type	= (CubicMazeCellWallType)((wallcode & 0x000F00) >>  8);
		cell->FrontWall.Type	= (CubicMazeCellWallType)((wallcode & 0x0000F0) >>  4);
		cell->BackWall.Type		= (CubicMazeCellWallType)((wallcode & 0x00000F) >>  0);
	}

	return cubicMaze;
}

//  ICubicMazeFactory Methods ------------------------------------------------------------------------------------------
